{% extends 'base.html' %}
{% block content %}
<a class="btn btn-secondary btn-sm mb-3" href="{% url 'lists:index' %}">Back To Lists</a>
<h1 class="text-center mb-3">{{ question.question_text }}</h1>

{% if error_message %}
<p class="alert alert-danger">
	<strong>{{ error_message }}</strong>
</p>
{% endif %}

<form id="list" action="{% url 'lists:vote' question.id %}" method="post">
	{% csrf_token %}
	{% with len=question.choice_set.all.count %}
	{% for choice in question.choice_set.all %}
		{% if choice.votes == 0 %}
			<div class="form-check">
				<input
					type="radio"
					name="choice"
					class="form-check-input"
					id="0"
					value="{{ choice.id }}"
					disabled
				/>
				<label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label
				>
			</div>
		{% else %}
			<div class="form-check">
				<input
					onclick="disableButtons(id, '{{ len }}')"
					type="radio"
					name="choice"
					class="form-check-input"
					id="{{ forloop.counter }}"
					value="{{ choice.id }}"
				/>
				<label for="{{ forloop.counter }}">{{ choice.choice_text }}</label
				>
			</div>
		{% endif %}
	{% endfor %}
	<input type='reset' onclick="reset_function('{{ len }}')" value="reset" />
	<input type="submit" value="Vote" class="btn btn-success btn-lg btn-block mt-4" />
	{% endwith %}
</form>
{% endblock %}
